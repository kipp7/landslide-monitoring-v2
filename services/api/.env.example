# api-service example config (DO NOT COMMIT REAL SECRETS)

SERVICE_NAME=api-service
API_HOST=0.0.0.0
API_PORT=8080

# In early stage we only enforce "Bearer present"; later will validate JWT properly.
AUTH_REQUIRED=true

POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=landslide
POSTGRES_PASSWORD=change-me
POSTGRES_DATABASE=landslide_monitor
POSTGRES_POOL_MAX=10

# Admin-only endpoints (devices/users/system) gate.
# If empty, admin endpoints are accessible without token (local dev only).
ADMIN_API_TOKEN=change-me

# EMQX -> HTTP auth webhook protection (optional but recommended).
# If set, EMQX must include header `x-emqx-token: <token>` when calling the webhook endpoints.
EMQX_WEBHOOK_TOKEN=change-me

# Internal MQTT client credentials (for server-side services like ingest).
# When MQTT auth is enabled, use these credentials to let ingest subscribe `telemetry/+`.
MQTT_INTERNAL_USERNAME=ingest-service
MQTT_INTERNAL_PASSWORD=change-me

CLICKHOUSE_URL=http://localhost:8123
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=landslide
CLICKHOUSE_TABLE=telemetry_raw

# Query protection (single-host friendly)
API_MAX_SERIES_RANGE_HOURS=168
API_MAX_POINTS=100000
