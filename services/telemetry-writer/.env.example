# telemetry-writer example config (DO NOT COMMIT REAL SECRETS)

SERVICE_NAME=telemetry-writer

KAFKA_BROKERS=127.0.0.1:9092
KAFKA_CLIENT_ID=telemetry-writer
KAFKA_GROUP_ID=telemetry-writer.v1
KAFKA_TOPIC_TELEMETRY_RAW=telemetry.raw.v1
KAFKA_TOPIC_TELEMETRY_DLQ=telemetry.dlq.v1

CLICKHOUSE_URL=http://127.0.0.1:8123
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=landslide
CLICKHOUSE_TABLE=telemetry_raw

# Postgres device_state shadow
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_USER=landslide
POSTGRES_PASSWORD=change-me
POSTGRES_DATABASE=landslide_monitor

# Redis idempotency (device_id + seq)
REDIS_URL=redis://:change-me@127.0.0.1:6379
DEDUPE_TTL_SECONDS=604800

# ops server (healthz/readyz/metrics)
OPS_HOST=0.0.0.0
OPS_PORT=9102
KAFKA_LAG_REFRESH_MS=10000

# batching
BATCH_MAX_ROWS=2000
BATCH_MAX_MESSAGES=500
BATCH_FLUSH_INTERVAL_MS=1000

# safety / observability
MESSAGE_MAX_BYTES=262144
DLQ_RAW_PAYLOAD_MAX_BYTES=65536
STATS_LOG_INTERVAL_MS=30000

# ClickHouse failure guard (for prolonged outages)
CLICKHOUSE_UNAVAILABLE_COOLDOWN_MS=15000
CLICKHOUSE_UNAVAILABLE_COOLDOWN_MAX_MS=300000
