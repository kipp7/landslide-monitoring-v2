## 1. 本地运行基线（Local Runtime Baseline）
- [ ] 1.1 盘点当前 `infra/compose` 与本地脚本现状（能否一键起 DB）
- [ ] 1.2 明确端口分配与冲突策略（3000/5174/8080 等）
- [ ] 1.3 明确最小依赖：Postgres + ClickHouse（可按服务拆分）
- [ ] 1.4 输出一份“本地启动 SOP”（不依赖个人环境）

## 2. API Service 可构建可启动
- [ ] 2.1 `npm -w services/api run build` 可通过
- [ ] 2.2 `npm -w services/api run start` 可启动并监听预期端口
- [ ] 2.3 `/health` 200 OK（含基本信息：version、uptime）
- [ ] 2.4 增加 `dev` 脚本（热重载可选）

## 3. 配置与环境变量
- [ ] 3.1 清理/补齐 `services/api/.env.example`（仅保留必要项）
- [ ] 3.2 统一本地默认配置（无 `.env` 也能启动，或启动时给出明确提示）
- [ ] 3.3 认证开发通行证：`Authorization: Bearer dev`（仅开发环境）

## 4. 数据库连通性
- [ ] 4.1 Postgres 连接成功（启动时自检并输出清晰日志）
- [ ] 4.2 ClickHouse 连接成功（可延迟初始化，但必须可诊断）
- [ ] 4.3 增加最小 schema 初始化策略（迁移/SQL 脚本/启动检查）

## 5. 最小联调接口（只读优先）
- [ ] 5.1 站点树/站点列表查询（供设备管理/GPS 页面）
- [ ] 5.2 设备列表与状态查询（供设备管理页面）
- [ ] 5.3 GPS 时间序列查询（供 GPS 监测趋势/表格）
- [ ] 5.4 告警事件列表（供首页/大屏/通知）

## 6. 可观测性与排障
- [ ] 6.1 启动日志包含：环境、端口、DB 连接结果
- [ ] 6.2 请求日志与错误日志可区分（必要时带 requestId）
- [ ] 6.3 关键失败时返回可读错误（不要只抛栈）

## 7. 验收
- [ ] 7.1 新机器按 SOP 启动成功（DB + API）
- [ ] 7.2 `curl http://localhost:<port>/health` 返回 200
- [ ] 7.3 桌面端切换 HTTP 模式时，至少能请求到一个只读接口（不崩溃）

