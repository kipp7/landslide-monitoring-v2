## 1. 版本与构建信息
- [ ] 1.1 统一版本号来源（csproj/AssemblyInfo/Git tag）
- [ ] 1.2 桌面端“关于/诊断”展示：版本号、commit、构建时间
- [ ] 1.3 构建时注入版本信息（CI 与本地一致）
- [ ] 1.4 注入 `AssemblyInformationalVersion`（SemVer + commit）
- [ ] 1.5 前端展示版本信息（设置页/关于页复用）
- [ ] 1.6 生成 `version.json` 并随产物发布（便于诊断/上报）

## 2. MSIX 打包（优先）
- [ ] 2.1 确定应用标识（Package ID/Publisher/DisplayName）
- [ ] 2.2 配置 MSIX 项目或打包脚本（生成可安装包）
- [ ] 2.3 打包包含前端静态资源（`apps/desk/dist` -> `web/`）
- [ ] 2.4 配置应用图标、开始菜单名称、安装体验
- [ ] 2.5 卸载后清理策略（缓存/日志目录策略说明）
- [ ] 2.6 确定安装范围与权限（per-user / per-machine）
- [ ] 2.7 配置包依赖与最低系统版本（Win11 优先）
- [ ] 2.8 配置 MSIX Manifest：通知/协议/自启所需声明（逐步启用）
- [ ] 2.9 安装包体积与资源检查（确保 `web/` 完整）
- [ ] 2.10 增加安装/卸载 smoke（本地脚本 + CI 可选）

## 3. 签名与证书
- [ ] 3.1 支持测试证书签名（开发/内测）
- [ ] 3.2 支持生产证书签名（交付/上线）
- [ ] 3.3 文档化证书获取与安全存放方式（不把证书提交到仓库）
- [ ] 3.4 开发态证书生成/安装 SOP（PowerShell）
- [ ] 3.5 CI 签名步骤隔离（仅用 secrets，不落盘）

## 4. 自动更新
- [ ] 4.1 选择更新方案（MSIX 更新 / 其他 Updater）
- [ ] 4.2 增加更新检查入口（设置页 + 托盘菜单）
- [ ] 4.3 更新下载进度与失败提示（网络/权限/签名）
- [ ] 4.4 支持“跳过此版本/稍后提醒”（可选）
- [ ] 4.5 回滚策略（至少保证可重新安装上一版本）
- [ ] 4.6 确定更新源（GitHub Releases/内网更新源）
- [ ] 4.7 更新检查频率策略（启动/每日/手动）
- [ ] 4.8 更新前提示与阻断策略（全屏/重要操作）
- [ ] 4.9 更新后验证：版本号变化 + 清理旧缓存（可选）

## 5. 便携版（可选）
- [ ] 5.1 生成 zip 便携包（无需安装，双击运行）
- [ ] 5.2 便携版的更新策略与限制说明
- [ ] 5.3 便携版数据目录策略（与安装版区分）
- [ ] 5.4 便携版快捷方式/自启限制说明（可选）

## 6. CI/发布流程
- [ ] 6.1 增加 GitHub Actions：构建前端 + 构建桌面端 + 产物上传
- [ ] 6.2 产物命名规则：包含版本号与架构（win-x64）
- [ ] 6.3 发布说明模板（更新内容、已知问题、回滚方式）
- [ ] 6.4 CI 构建加速：npm/dotnet 缓存与产物复用

## 7. 文档与验收
- [ ] 7.1 编写 `docs/PRODUCTION.md` 或 `apps/desk-win/README.md` 的“交付安装”章节
- [ ] 7.2 验收：干净 Win11 机器安装/运行/卸载/更新成功
- [ ] 7.3 验收：从 Release 下载并安装升级（验证更新路径）

## 8. 品牌资产与图标打包（交付观感）
- [ ] 8.1 设计并确定桌面端 App 图标（品牌化、非“股市风”）
- [ ] 8.2 产出图标规范：尺寸/留白/圆角/色板/导出格式
- [ ] 8.3 生成 ico 多尺寸（16/24/32/48/64/128/256）并验证清晰度
- [ ] 8.4 生成 PNG/SVG 源文件并归档到 `apps/desk/public`（或专用目录）
- [ ] 8.5 生成浅色/深色任务栏两套图标（可选）
- [ ] 8.6 应用图标替换：WPF `ApplicationIcon` 与托盘图标一致
- [ ] 8.7 安装包图标与开始菜单图标一致（MSIX Manifest）
- [ ] 8.8 应用显示名/描述：与登录页品牌文案一致
- [ ] 8.9 “关于”页面展示：图标 + 名称 + 版本 + 版权/单位信息（如需要）
- [ ] 8.10 崩溃/错误页展示：小图标与品牌色一致
- [ ] 8.11 加载页文案与品牌一致（去掉开发口吻）
- [ ] 8.12 安装器欢迎页文案（如有）与品牌一致
- [ ] 8.13 文件关联图标（可选：导出报告/数据文件）
- [ ] 8.14 协议处理器图标（landslide://，可选）
- [ ] 8.15 通知图标：Toast/气泡显示时的图标一致
- [ ] 8.16 任务栏缩略图与预览标题一致（可选）
- [ ] 8.17 应用元数据（Publisher/Website/Support）整理与文档化
- [ ] 8.18 资源文件命名规范与目录结构整理
- [ ] 8.19 品牌色与 UI tokens 对齐（主色/强调色/告警色）
- [ ] 8.20 完成一次“图标在 Win11 各处展示”验收清单（任务栏/托盘/开始菜单）

## 9. 安装体验（MSIX/便携）
- [ ] 9.1 选择默认安装方案（MSIX 优先）并记录决策与原因
- [ ] 9.2 MSIX：安装范围策略（per-user/per-machine）明确
- [ ] 9.3 MSIX：首次安装后的首次启动体验（引导/提示）打磨
- [ ] 9.4 MSIX：卸载后数据目录清理策略说明（保留/清理开关）
- [ ] 9.5 MSIX：权限声明最小化（不多要权限）
- [ ] 9.6 MSIX：AppUserModelID 固定并验证 Toast 可用
- [ ] 9.7 MSIX：协议处理器注册（landslide://，可选）与验收
- [ ] 9.8 MSIX：自启能力声明与设置开关（可选）
- [ ] 9.9 MSIX：文件对话框/导出目录权限策略（可选）
- [ ] 9.10 MSIX：应用更新后配置迁移策略（localStorage/userData）
- [ ] 9.11 安装包：包含 `apps/desk/dist` 的完整性校验（hash/文件数）
- [ ] 9.12 安装包：构建产物体积分析与优化（减少冗余）
- [ ] 9.13 安装包：启动速度 smoke（干净机器）
- [ ] 9.14 安装包：离线安装可用性（内网环境）
- [ ] 9.15 安装包：安装失败时错误信息可读（常见原因文档）
- [ ] 9.16 便携版：启动脚本与配置目录策略（与安装版区分）
- [ ] 9.17 便携版：自更新策略（如果不支持，给出说明）
- [ ] 9.18 便携版：快捷方式创建说明（可选）
- [ ] 9.19 便携版：签名/校验说明（如需要）
- [ ] 9.20 便携版：清理数据与卸载等价流程说明
- [ ] 9.21 安装器：语言/地区适配（zh-CN 优先）
- [ ] 9.22 安装器：默认安装路径策略（如支持配置）
- [ ] 9.23 安装器：安装完成后是否自动启动（可选）
- [ ] 9.24 安装器：开始菜单/桌面快捷方式策略（可选）
- [ ] 9.25 完成“安装/卸载/重装”全流程验收脚本（PowerShell）

## 10. 更新体验（可运维）
- [ ] 10.1 更新检查入口：设置页与托盘菜单一致
- [ ] 10.2 更新提示 UI：不遮挡关键操作，支持“稍后提醒”
- [ ] 10.3 更新提示 UI：展示版本号/更新内容摘要/发布时间
- [ ] 10.4 更新下载：进度条与剩余时间估算（可选）
- [ ] 10.5 更新下载：失败原因分类（网络/权限/签名/空间不足）
- [ ] 10.6 更新安装：安装前二次确认（全屏/重要操作时）
- [ ] 10.7 更新安装：支持后台下载、前台提示安装（可选）
- [ ] 10.8 更新回滚：保留上一版本下载地址与回滚指南
- [ ] 10.9 更新回滚：更新失败自动回退策略（可选）
- [ ] 10.10 更新后：提示“更新完成”并显示版本变化
- [ ] 10.11 更新后：校验 Web 资源版本与 DLL 版本一致
- [ ] 10.12 更新后：清理旧 Web 资源与缓存策略（可选）
- [ ] 10.13 更新后：保留用户配置与登录态策略明确
- [ ] 10.14 更新策略：内网环境的更新源支持（镜像/私有 Releases）
- [ ] 10.15 更新策略：灰度发布/分组发布（可选）
- [ ] 10.16 更新策略：强制更新（高危漏洞）预案（可选）
- [ ] 10.17 更新策略：离线更新包导入（可选）
- [ ] 10.18 更新日志：记录更新时间/结果到诊断包
- [ ] 10.19 更新安全：强制校验签名/哈希（如实现 updater）
- [ ] 10.20 完成“更新流程”验收清单（升级/回滚/失败场景）
- [ ] 10.21 更新提示：支持“跳过此版本”（可选）
- [ ] 10.22 更新提示：支持“查看详细更新日志”（打开网页/内置）
- [ ] 10.23 更新提示：支持“下载后稍后安装”（可选）
- [ ] 10.24 更新：与崩溃恢复/诊断包联动（更新失败可定位）
- [ ] 10.25 更新：CI 自动生成 Release Notes（根据 commits/标签）

## 11. 发布与回滚（流程化）
- [ ] 11.1 发布流程：版本号策略（SemVer）与 tag 规范
- [ ] 11.2 发布流程：生成 changelog 模板并固化（可自动）
- [ ] 11.3 发布流程：GitHub Releases 产物命名与附件清单
- [ ] 11.4 发布流程：产物 hash（sha256）生成并随 release 发布
- [ ] 11.5 发布流程：签名验证说明写入发布页
- [ ] 11.6 发布流程：环境变量与配置文件说明（dev/prod）
- [ ] 11.7 发布流程：内网部署下载镜像策略（可选）
- [ ] 11.8 回滚流程：上一版本 release 的固定链接与 SOP
- [ ] 11.9 回滚流程：回滚后数据目录兼容性检查
- [ ] 11.10 回滚流程：回滚后 WebView2 缓存清理建议
- [ ] 11.11 回滚流程：回滚后版本显示与诊断信息一致
- [ ] 11.12 发布验证：干净机器 smoke（启动/托盘/全屏/退出）
- [ ] 11.13 发布验证：构建可复现（CI 与本地一致）
- [ ] 11.14 发布验证：产物依赖清单（WebView2/VC++）明确
- [ ] 11.15 发布验证：运行时缺失依赖时提示可操作（安装引导）
- [ ] 11.16 发布验证：升级/卸载后无残留进程/托盘图标
- [ ] 11.17 发布验证：配置迁移（settings/localStorage）策略验证
- [ ] 11.18 发布验证：日志/崩溃日记路径与收集策略验证
- [ ] 11.19 发布验证：安全扫描与 secrets 检查通过
- [ ] 11.20 完成发布/回滚的演练记录（至少 1 次）

## 12. 合规与安全（交付底线）
- [ ] 12.1 禁止在仓库中提交证书/私钥/敏感 token（校验规则）
- [ ] 12.2 产物签名密钥管理方案（keyring/CI secrets/内网）
- [ ] 12.3 产物下载源可信（HTTPS/内网镜像）与校验说明
- [ ] 12.4 更新包校验策略（签名/哈希）写入文档
- [ ] 12.5 第三方依赖清单与许可证检查（最小化风险）
- [ ] 12.6 崩溃/诊断包脱敏策略明确并实现（不含账号/token）
- [ ] 12.7 日志目录权限与访问控制（仅当前用户）
- [ ] 12.8 安装/更新脚本避免需要管理员权限（能不用就不用）
- [ ] 12.9 安装/更新失败不暴露内部路径/敏感信息（提示友好）
- [ ] 12.10 完成一次发布安全检查清单并归档
