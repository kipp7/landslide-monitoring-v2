## 1. 版本与构建信息
- [ ] 1.1 统一版本号来源（csproj/AssemblyInfo/Git tag）
- [ ] 1.2 桌面端“关于/诊断”展示：版本号、commit、构建时间
- [ ] 1.3 构建时注入版本信息（CI 与本地一致）
- [ ] 1.4 注入 `AssemblyInformationalVersion`（SemVer + commit）
- [ ] 1.5 前端展示版本信息（设置页/关于页复用）
- [ ] 1.6 生成 `version.json` 并随产物发布（便于诊断/上报）

## 2. MSIX 打包（优先）
- [ ] 2.1 确定应用标识（Package ID/Publisher/DisplayName）
- [ ] 2.2 配置 MSIX 项目或打包脚本（生成可安装包）
- [ ] 2.3 打包包含前端静态资源（`apps/desk/dist` -> `web/`）
- [ ] 2.4 配置应用图标、开始菜单名称、安装体验
- [ ] 2.5 卸载后清理策略（缓存/日志目录策略说明）
- [ ] 2.6 确定安装范围与权限（per-user / per-machine）
- [ ] 2.7 配置包依赖与最低系统版本（Win11 优先）
- [ ] 2.8 配置 MSIX Manifest：通知/协议/自启所需声明（逐步启用）
- [ ] 2.9 安装包体积与资源检查（确保 `web/` 完整）
- [ ] 2.10 增加安装/卸载 smoke（本地脚本 + CI 可选）

## 3. 签名与证书
- [ ] 3.1 支持测试证书签名（开发/内测）
- [ ] 3.2 支持生产证书签名（交付/上线）
- [ ] 3.3 文档化证书获取与安全存放方式（不把证书提交到仓库）
- [ ] 3.4 开发态证书生成/安装 SOP（PowerShell）
- [ ] 3.5 CI 签名步骤隔离（仅用 secrets，不落盘）

## 4. 自动更新
- [ ] 4.1 选择更新方案（MSIX 更新 / 其他 Updater）
- [ ] 4.2 增加更新检查入口（设置页 + 托盘菜单）
- [ ] 4.3 更新下载进度与失败提示（网络/权限/签名）
- [ ] 4.4 支持“跳过此版本/稍后提醒”（可选）
- [ ] 4.5 回滚策略（至少保证可重新安装上一版本）
- [ ] 4.6 确定更新源（GitHub Releases/内网更新源）
- [ ] 4.7 更新检查频率策略（启动/每日/手动）
- [ ] 4.8 更新前提示与阻断策略（全屏/重要操作）
- [ ] 4.9 更新后验证：版本号变化 + 清理旧缓存（可选）

## 5. 便携版（可选）
- [ ] 5.1 生成 zip 便携包（无需安装，双击运行）
- [ ] 5.2 便携版的更新策略与限制说明
- [ ] 5.3 便携版数据目录策略（与安装版区分）
- [ ] 5.4 便携版快捷方式/自启限制说明（可选）

## 6. CI/发布流程
- [ ] 6.1 增加 GitHub Actions：构建前端 + 构建桌面端 + 产物上传
- [ ] 6.2 产物命名规则：包含版本号与架构（win-x64）
- [ ] 6.3 发布说明模板（更新内容、已知问题、回滚方式）
- [ ] 6.4 CI 构建加速：npm/dotnet 缓存与产物复用

## 7. 文档与验收
- [ ] 7.1 编写 `docs/PRODUCTION.md` 或 `apps/desk-win/README.md` 的“交付安装”章节
- [ ] 7.2 验收：干净 Win11 机器安装/运行/卸载/更新成功
- [ ] 7.3 验收：从 Release 下载并安装升级（验证更新路径）

## 8. MSIX Manifest 与 Win11 体验细节
- [ ] 8.1 补齐 MSIX 资源：多尺寸图标（Start Menu/Taskbar/Store 风格）
- [ ] 8.2 配置 Start Menu 显示名称与分组（便于现场人员找到）
- [ ] 8.3 配置默认语言与区域（zh-CN）
- [ ] 8.4 配置通知能力声明（后续 Toast 使用所需）
- [ ] 8.5 配置协议处理声明（landslide:// 深链接）
- [ ] 8.6 配置开机自启所需声明（若采用 MSIX 能力）
- [ ] 8.7 配置卸载策略：缓存/日志保留说明与清理建议
- [ ] 8.8 增加升级/降级兼容策略说明（用户数据迁移）
- [ ] 8.9 增加安装体验自检：首次启动是否能加载 `web/` 静态资源
- [ ] 8.10 可选：验证 Windows App Certification Kit 的关键项（记录结果）

## 9. Release 产物与校验（可交付）
- [ ] 9.1 产物生成 SHA256 校验文件（.sha256）
- [ ] 9.2 产物生成 `version.json`（前端版本/桌面壳版本/commit/构建时间）
- [ ] 9.3 产物生成 `CHANGELOG.md` 或 Release Notes 模板（规范化）
- [ ] 9.4 产物生成“已知问题”清单（现场排障）
- [ ] 9.5 增加签名校验步骤（安装前验证签名是否有效）
- [ ] 9.6 增加病毒/安全扫描建议与流程说明（企业环境）
- [ ] 9.7 增加可复现构建记录：Node/.NET/依赖版本写入产物
- [ ] 9.8 增加“回滚包”产出策略（至少保留上一版本 MSIX/zip）
- [ ] 9.9 增加便携包产物规范：zip 内目录结构与启动脚本（可选）
- [ ] 9.10 验收：Release 下载后可独立安装并运行（无源码依赖）

## 10. 自动更新落地（MSIX/AppInstaller 或替代方案）
- [ ] 10.1 若选 MSIX：生成 `.appinstaller` 并配置更新源
- [ ] 10.2 若选 MSIX：配置更新检查频率与手动检查入口
- [ ] 10.3 若选替代 Updater：明确实现与安全边界（签名/校验）
- [ ] 10.4 UI：设置页与托盘菜单增加“检查更新”入口（与提示一致）
- [ ] 10.5 UI：更新下载进度与失败提示（网络/权限/签名）
- [ ] 10.6 策略：全屏状态下更新提示与阻断（避免影响现场展示）
- [ ] 10.7 安全：更新前校验包签名与版本号（防止降级/篡改）
- [ ] 10.8 日志：记录更新检查/下载/安装结果到本地日志
- [ ] 10.9 回滚：更新失败后可恢复上一版本（至少给出操作路径）
- [ ] 10.10 验收：两版本之间升级成功且版本号变化可见

## 11. 企业/离线交付 SOP（现场可用）
- [ ] 11.1 编写离线安装指引：`Add-AppxPackage` 与常见错误排查
- [ ] 11.2 编写证书安装指引：测试证书/生产证书的安装与卸载
- [ ] 11.3 编写企业策略说明：组策略/代理/禁止 Store 环境的限制
- [ ] 11.4 支持“环境配置注入”：交付时写入 API baseUrl 等（不改源码）
- [ ] 11.5 支持多环境包区分：演示/生产（图标或版本标识区分）
- [ ] 11.6 编写卸载指引：保留日志/清理缓存的推荐流程
- [ ] 11.7 编写离线升级指引：下载新包->安装覆盖->验证版本
- [ ] 11.8 增加 IT 交接清单：安装、更新、日志、诊断包、问题反馈渠道
- [ ] 11.9 增加现场支持信息：如何导出诊断包并上传给开发
- [ ] 11.10 验收：在无网络 Win11 机器上完成安装与离线启动（加载本地 web）
