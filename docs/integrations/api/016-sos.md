# SOS 求助接口（移动端 MVP）

## 1. 发起 SOS

**POST** `/sos`

用途：公众/现场人员发起紧急求助（必须包含经纬度，可选描述/联系方式/附件）。

请求示例：

```json
{
  "latitude": 21.6849,
  "longitude": 108.3519,
  "description": "疑似滑坡前兆，需要紧急支援。",
  "address": "示例路 88 号",
  "contactName": "张三",
  "contactPhone": "13800000000",
  "priority": "high",
  "attachments": [
    { "url": "https://example.com/sos/audio-1.mp3", "type": "audio", "name": "audio-1.mp3" }
  ],
  "metadata": { "source": "mobile" }
}
```

返回示例：

```json
{
  "success": true,
  "code": 200,
  "message": "ok",
  "data": {
    "sosId": "22222222-2222-2222-2222-222222222222",
    "status": "open",
    "priority": "high",
    "description": "疑似滑坡前兆，需要紧急支援。",
    "address": "示例路 88 号",
    "contactName": "张三",
    "contactPhone": "13800000000",
    "latitude": 21.6849,
    "longitude": 108.3519,
    "attachments": [
      { "url": "https://example.com/sos/audio-1.mp3", "type": "audio", "name": "audio-1.mp3" }
    ],
    "createdBy": "00000000-0000-0000-0000-000000000001",
    "createdAt": "2025-12-15T10:00:00Z",
    "updatedAt": "2025-12-15T10:00:00Z",
    "acknowledgedAt": null,
    "resolvedAt": null,
    "metadata": { "source": "mobile" }
  },
  "timestamp": "2025-12-15T10:00:00Z",
  "traceId": "req_01J..."
}
```

## 2. 查询 SOS 状态

**GET** `/sos/{sosId}`

用途：查询 SOS 工单状态与详情。

返回示例：

```json
{
  "success": true,
  "code": 200,
  "message": "ok",
  "data": {
    "sosId": "22222222-2222-2222-2222-222222222222",
    "status": "open",
    "priority": "high",
    "description": "疑似滑坡前兆，需要紧急支援。",
    "address": "示例路 88 号",
    "contactName": "张三",
    "contactPhone": "13800000000",
    "latitude": 21.6849,
    "longitude": 108.3519,
    "attachments": [
      { "url": "https://example.com/sos/audio-1.mp3", "type": "audio", "name": "audio-1.mp3" }
    ],
    "createdBy": "00000000-0000-0000-0000-000000000001",
    "createdAt": "2025-12-15T10:00:00Z",
    "updatedAt": "2025-12-15T10:00:00Z",
    "acknowledgedAt": null,
    "resolvedAt": null,
    "metadata": { "source": "mobile" }
  },
  "timestamp": "2025-12-15T10:00:00Z",
  "traceId": "req_01J..."
}
```
