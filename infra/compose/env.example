# 基础设施环境变量示例（单机 Compose）
# 复制为 `.env` 并按需修改；敏感信息不要提交到仓库。

TZ=Asia/Shanghai

# 数据目录（强烈建议外置，便于备份/迁移）
# 说明：路径相对于 `infra/compose/docker-compose.yml` 所在目录解析。
DATA_DIR=../../data

# PostgreSQL（元数据/规则/告警/权限）
PG_USER=landslide
PG_PASSWORD=change-me
PG_DATABASE=landslide_monitor
PG_HOST=localhost
PG_PORT=5432
PG_URL=postgresql://${PG_USER}:${PG_PASSWORD}@${PG_HOST}:${PG_PORT}/${PG_DATABASE}

# Redis（缓存/去重/限流计数）
REDIS_PASSWORD=change-me
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}

# ClickHouse（遥测时序）
CH_DATABASE=landslide
CH_USER=landslide
CH_PASSWORD=change-me
CH_HOST=localhost
CH_HTTP_PORT=8123
CH_NATIVE_PORT=9000
CH_HTTP_URL=http://${CH_HOST}:${CH_HTTP_PORT}

# EMQX（MQTT Broker）
MQTT_HOST=localhost
MQTT_PORT=1883
MQTT_URL=mqtt://${MQTT_HOST}:${MQTT_PORT}
EMQX_DASHBOARD_USER=admin
EMQX_DASHBOARD_PASSWORD=change-me

# Kafka（单机 KRaft）
# 主机访问建议用 9094（EXTERNAL listener）
KAFKA_BROKERS=localhost:9094
KAFKA_LOG_RETENTION_HOURS=72
# KRaft Cluster ID：需要是 base64 UUID（可用 `docker run --rm apache/kafka:3.7.0 bash -lc "/opt/kafka/bin/kafka-storage.sh random-uuid"` 生成）
CLUSTER_ID=5L6g3nShT-eMCtK--X86sw

# 应用层（实现阶段使用）
NODE_ENV=development
API_PORT=5000
API_PREFIX=/api/v1

# JWT（管理端登录使用）
JWT_SECRET=change-me
JWT_EXPIRES_IN=2h
JWT_REFRESH_EXPIRES_IN=7d

# 推送（可选）
JPUSH_APP_KEY=
JPUSH_MASTER_SECRET=
